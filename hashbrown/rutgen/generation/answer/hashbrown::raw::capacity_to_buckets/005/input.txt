cap values in the range of 8 to 2^30, ensuring cap is not zero and the multiplication checked_mul does not overflow.
