cache is valid and non-empty, input has at least one byte, patset has sufficient capacity, state initialized with None for mat, id, at set to 0, next_match_index as None, and rev_eoi as false.
