state: any valid non-empty State, self.states.len() < maximum allowed states, self.memory_states + state.memory_usage() <= size_limit (when set) or size_limit is None
