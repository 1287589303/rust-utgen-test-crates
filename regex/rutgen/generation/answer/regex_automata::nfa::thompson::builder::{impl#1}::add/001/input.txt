self.states.len() must be less than MaxStates and state memory usage should not exceed SizeLimit, with valid State types including Empty, ByteRange, Look, CaptureStart, CaptureEnd, Fail, Match, Sparse, Union, UnionReverse, and the return types must be Result<StateID, BuildError>.
