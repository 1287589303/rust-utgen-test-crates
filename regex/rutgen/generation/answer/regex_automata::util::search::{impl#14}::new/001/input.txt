capacity: 0 to PatternID::LIMIT, inclusive
