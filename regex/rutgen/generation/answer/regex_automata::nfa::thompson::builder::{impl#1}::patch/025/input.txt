self.states contains at least one State::ByteRange, from and to are valid StateID instances, old_memory_states equals self.memory_states before patching, and the size limit is not exceeded after adding the transition.
