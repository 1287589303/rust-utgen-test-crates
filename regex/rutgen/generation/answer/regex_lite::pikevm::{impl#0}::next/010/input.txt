sid must be valid for the ranges state; haystack must be non-empty; at must be a valid index in haystack; at_ch must be equal to start; at_len must be greater than 0; ranges must contain pairs where start == at_ch and end >= at_ch.
