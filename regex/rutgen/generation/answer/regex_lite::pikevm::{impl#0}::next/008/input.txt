nfa state should match State::Ranges; haystack should contain a character equal to at_ch; at_len should be 0; at should be a valid index in the haystack; ranges should consist of a tuple where start equals at_ch and end equals at_ch.
