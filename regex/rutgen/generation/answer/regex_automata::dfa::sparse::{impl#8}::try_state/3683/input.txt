id.as_usize() must equal self.sparse().len(), ntrans must equal 0, is_match must be false, and sp.is_match_state(id) must be false, while input_ranges must be valid with pairs (start, end) such that start <= end, and the next state IDs must be valid without causing any errors in length checks.
