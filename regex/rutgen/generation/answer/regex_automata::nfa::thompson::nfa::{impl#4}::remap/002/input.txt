self should be of type State with a variant of State::Fail, remap should be an empty slice or a slice of StateID that is not accessed to confirm that the function handles the fail state properly.
