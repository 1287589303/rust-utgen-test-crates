self must be a State::Sparse with an empty transitions array, and remap should be a valid reference to a StateID array with at least one element.
