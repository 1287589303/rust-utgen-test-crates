dst.len() should be less than the value returned by write_to_len(), with nwrite being in the range of 1 to 1024 bytes.
