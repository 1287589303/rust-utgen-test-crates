haystack length must be equal to span.end, span.start must be less than or equal to span.end, sid must be a valid StateID, mat must be mutable, and dfa must be an Automaton instance with a matching state for sid.
