cache.visited.insert(sid, at - input.start()) must return true; sid must correspond to a valid Look state in the NFA, ensuring at < input.end(); look must be valid to allow matches; self.nfa.look_matcher().matches_inline(look, input.haystack(), at) must return false.
