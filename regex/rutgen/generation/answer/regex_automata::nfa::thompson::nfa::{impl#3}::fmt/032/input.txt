self.states must be non-empty with valid StateID indices, start_anchored and start_unanchored must be distinct valid StateIDs within the range of state indices, and the Format function must return an Err/None when writing to the fmt::Formatter with diverse states including at least one with unprintable or unexpected byte data leading to a write failure.
