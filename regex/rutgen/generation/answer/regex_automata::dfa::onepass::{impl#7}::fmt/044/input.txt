state_len > 0, sid != DEAD for all sid in 0..state_len, pateps.pattern_id() is valid, no empty pateps for all states.
