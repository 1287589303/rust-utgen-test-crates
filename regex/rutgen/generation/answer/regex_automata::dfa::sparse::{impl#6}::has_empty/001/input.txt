self.flags.has_empty should be tested with boolean values {true, false} for various states of the flags structure, including edge cases of initialization and modification.
