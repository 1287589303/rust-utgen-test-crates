HeapVisitor should be instantiated with an empty stack in all cases, and must handle references to Hir objects properly, ensuring that it can accommodate varying types and lifetimes of Hir instances.
