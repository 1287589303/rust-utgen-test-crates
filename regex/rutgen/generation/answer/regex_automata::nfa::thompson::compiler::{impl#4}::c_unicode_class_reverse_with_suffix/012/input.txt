cls must be an empty ClassUnicode instance that results in an empty iterator for cls.iter(), and self.add_union() and self.add_empty() must return valid StateID instances for successful execution.
