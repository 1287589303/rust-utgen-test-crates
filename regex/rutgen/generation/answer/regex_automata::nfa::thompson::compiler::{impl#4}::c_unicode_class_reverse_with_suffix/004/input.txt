cls must contain a valid ClassUnicode with at least one range whose start and end bytes are valid UTF-8 bytes, brng.start must be less than or equal to brng.end, and self.add_union() and self.add_empty() must return valid StateIDs.
