self.builder must be initialized with a valid Builder instance, the Builder must have a non-None current pattern ID, and the Builder's state must allow adding a match without exceeding any configured size limits.
