self.kind() should be HirKind::Repetition with non-empty sub-expression, stack should contain at least one HirKind::Literal, HirKind::Class, HirKind::Look, or HirKind::Empty; self should not be empty and should have a sub-expression that matches the above conditions
