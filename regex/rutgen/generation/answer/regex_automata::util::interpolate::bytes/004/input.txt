replacement: non-empty byte string containing at least one occurrence of '$' not followed by another '$', valid capture references (integer or named) must be present, append function must handle valid indices, name_to_index function must return Some for valid names, dst must be a mutable Vec<u8>
