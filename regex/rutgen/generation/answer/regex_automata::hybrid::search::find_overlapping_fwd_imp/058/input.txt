Input conditions: state.id should be None; dfa must be properly initialized; cache should be mutable; input's haystack should contain valid bytes; input.start() < input.end(); state.at should be within the range of input haystack length; the initial call to init_fwd should return Ok; at least one call to next_state should encounter a quiting state.
