self.state_len() > 2; self.starts() is non-empty; valid start_id such that start_id != DEAD; no overlap between start and match states; matches is non-empty; valid (id, pids) pairs in matches exist; next_id must not be in is_start before shuffling; self.special.matches() is false; valid ids in is_start during final state remap; self.set_pattern_map(&matches) should not return an error.
