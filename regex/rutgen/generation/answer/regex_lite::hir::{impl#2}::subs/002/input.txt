self must be of type Hir with kind HirKind::Concat containing non-empty Vec<Hir> elements; each element must represent valid HirKind variants including Repetition, Capture, or nested Concat scenarios.
