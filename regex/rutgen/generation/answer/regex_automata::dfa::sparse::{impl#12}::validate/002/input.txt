self.iter() must return a non-empty iterator containing valid StateID values, seen must contain all StateID values returned by self.iter() and sp must not identify any of the StateID values as match states.
