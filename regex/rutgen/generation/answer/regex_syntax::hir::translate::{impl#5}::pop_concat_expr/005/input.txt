self.pop() must return Some(HirFrame::Group { old_flags: Flags }) and there should not be any preceding HirFrame::Concat on the stack.
