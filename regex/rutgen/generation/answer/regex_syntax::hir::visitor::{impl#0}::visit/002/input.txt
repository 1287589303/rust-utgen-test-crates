visitor.visit_pre(hir) must return Ok/Some; hir must be a non-empty Hir of kind Repetition, Capture, Concat, or Alternation; visitor.visit_post(hir) must return Err/None.
