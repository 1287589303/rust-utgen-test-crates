self.tt.states() is empty; self.st.iter().enumerate() returns some valid items; self.st.stride is non-zero; use Anchored::Yes; ensure formatter 'f' is not null; ensure state representation fits into usize; ensure no panics on pattern lengths and flag assignments.
