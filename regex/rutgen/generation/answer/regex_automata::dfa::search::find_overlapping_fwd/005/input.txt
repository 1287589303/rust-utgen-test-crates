haystack: non-empty byte slice; span: valid range (start < end); anchored: Anchored::No; earliest: true/false; state.at: within bounds of haystack length
