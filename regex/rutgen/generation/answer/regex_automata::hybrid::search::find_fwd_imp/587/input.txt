dfa must have valid initialized states; cache must be mutable, with existing search data; input must have haystack of length > 0 with at least one valid span; pre must not be None and have valid prefilter that matches input; earliest must be false; sid must be of valid tagged state, not start, match, dead, quit, or unknown; ensure at equals input.end while satisfying all conditions.
