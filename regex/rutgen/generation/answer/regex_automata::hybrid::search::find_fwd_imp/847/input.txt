dfa: valid DFA instance, cache: mutable Cache instance, input: Input with non-empty haystack, pre: Some valid Prefilter instance, haystack spans for pre.find() yield overlapping matches, span must be valid, input.end() > at, sid starts untagged; test end condition with at == input.end() after processing unmatched states.
