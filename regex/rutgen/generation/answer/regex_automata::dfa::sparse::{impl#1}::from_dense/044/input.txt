dfa.states() contains at least one state, transition_len is in the range 1 to 257 (inclusive), dfa.is_match_state(state.id()) can return both true and false, unit1 and unit2 can be None (no transitions), and old_state is present in dfa.states() with valid next transitions.
