Ast must be a non-empty variant of Ast, visitor must implement Visitor, stack must contain at least one frame of type Frame, and the visitor's methods must return Ok/Some for visit_pre and visit_post until an inductive case is processed.
