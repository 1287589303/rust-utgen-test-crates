self.states must be a non-empty Vec with at least one State containing valid StateID, and the Formatter must allow writing such that writeln returns Ok/Some for the initial message, along with valid sid.as_usize(), and self.states must contain elements that can produce a valid format for writeln without causing an error.
