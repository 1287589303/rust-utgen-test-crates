self.wtr must implement fmt::Write, ast must be a valid ast::SetFlags object with a non-empty flags vector, and the items in flags should cover all flag types including both negation and standard flags.
