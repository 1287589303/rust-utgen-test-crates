self.char() == '[', self.bump_and_bump_space() returns true, self.char() == '^', self.bump_and_bump_space() returns true, self.char() == '-', union.items.is_empty() is true, self.char() != ']' at this point, self.bump_and_bump_space() returns true
