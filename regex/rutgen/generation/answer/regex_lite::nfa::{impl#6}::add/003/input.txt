state must be one of State variants; number of existing states must be less than u32::MAX; memory_usage must be within the configured size limit where size_limit is Some(usize) or equal to usize::MAX.
