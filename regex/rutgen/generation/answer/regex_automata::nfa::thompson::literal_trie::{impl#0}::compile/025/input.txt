builder states should allow adding a single empty state, initial state should contain at least one non-leaf transition with detailed input ranges, sparse states should contain at least one valid transition to pass through to build an NFA, union of transitions should be pushable, and stack pop should confirm no parent state is pending, all while memory limits are not exceeded and UTF-8 compatibility is maintained.
