builder size_limit should be None or large enough, self.states should contain at least one non-leaf state, f.sparse must contain multiple transitions, last element in f.sparse must not be empty, f.chunks must contain at least one chunk, builder must not exceed total memory used by states, StateID must not exceed the defined range.
