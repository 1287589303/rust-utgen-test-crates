builder must be initialized, self.states must contain at least 1 state with transitions, PatternID must be valid for all states, states must contain transitions leading to non-leaf states, f.sparse must have more than 1 entry, builder.add_range must be called with a transition that causes an error.
