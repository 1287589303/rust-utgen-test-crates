at must be a valid index within the range of the input haystack (0 to input.haystack.len()), the set must be empty (len == 0) in ActiveStates for curr, and slots must have a defined size capable of holding at least one Option<NonMaxUsize> element
