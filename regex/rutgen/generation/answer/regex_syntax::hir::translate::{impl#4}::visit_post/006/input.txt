ast must be an instance of Ast::Group, and the group should have a valid structure with non-empty expressions, including valid old_flags, and follow all internal class and method requirements.
