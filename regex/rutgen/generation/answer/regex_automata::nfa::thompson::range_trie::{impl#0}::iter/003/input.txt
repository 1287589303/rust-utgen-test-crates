valid StateID for stack.pop() > 0, valid tidx < state.transitions.len(), t.next_id == FINAL, function f returns Err or None
