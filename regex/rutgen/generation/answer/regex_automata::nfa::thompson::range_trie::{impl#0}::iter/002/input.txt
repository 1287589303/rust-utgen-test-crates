state_id in valid range of StateID, tidx equal to length of state.transitions minus 1, ranges as non-empty slice of Utf8Range, f as a closure returning Result<(), E>
