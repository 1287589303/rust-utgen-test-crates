input range: non-empty haystack data in UTF-8 format, valid span (0..size of haystack), anchored mode boolean, earliest boolean for ambiguity
