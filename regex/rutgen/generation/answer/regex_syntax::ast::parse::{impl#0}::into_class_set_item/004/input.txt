self must be a Primitive::Literal with a valid lit value, while p should be a ParserI instance with a valid pattern; ensure lit is non-empty and p's pattern spans an acceptable range.
