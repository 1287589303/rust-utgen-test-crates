Iterator must yield at least two Results containing Ok(ThompsonRef) values, followed by additional Results; valid StateID values must be used for patches without exceeding state limits and memory allocation must not fail, resulting in an Ok(ThompsonRef) output.
