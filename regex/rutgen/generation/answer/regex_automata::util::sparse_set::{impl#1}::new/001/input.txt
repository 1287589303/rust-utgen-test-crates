capacity: 0 to StateID::LIMIT, inclusive
