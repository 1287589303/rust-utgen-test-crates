PatternID in valid range, SmallIndex in valid range, maybe_name is Some with a duplicate name in self.name_to_index[pid], and self.slot_ranges[pid] is initialized.
