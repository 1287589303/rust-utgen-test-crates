0 < capacity <= StateID::LIMIT
