self.pattern should contain multiple lines, err should implement fmt::Display and returns an error, spans.multi_line should be non-empty
