self should have pre set to Option<Prefilter> with values being None or Some(Prefilter) where Prefilter includes max_needle_len ranging from 0 to some reasonable upper limit, pre.is_fast being either true or false, and should accommodate MatchKind as either All or LeftmostFirst.
