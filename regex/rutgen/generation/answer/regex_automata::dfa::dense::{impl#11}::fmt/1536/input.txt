precondition: f is valid fmt::Formatter, self.states() is empty, self.starts() is empty, self.pattern_len() == 1, self.state_len() > 0, self.flags is invalid
