self.states() should return a non-empty iterator, self.pattern_len() should be greater than 1, and the fmt_state_indicator should react with an Err/None for at least one state, with all other states returning Ok/Some
