i: usize should be in the range [0, pattern.len()] to avoid panic.
