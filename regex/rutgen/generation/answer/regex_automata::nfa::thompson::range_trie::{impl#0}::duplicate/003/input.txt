old_id is a valid StateID not equal to FINAL; state transitions for old_id exist; at least one transition has next_id equal to FINAL; there are transitions left to process in the stack; new_id must be a valid StateID after calling add_empty()
