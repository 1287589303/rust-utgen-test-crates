pattern: non-empty string; states: vector of at least one State; state ID: valid u32 ranging from 0 to the length of states minus one; state elements: valid variants of State enum; write to f: valid Formatter instance; test for error handling with empty states or invalid state types
