flags must be a NonCapturing group with at least one flag, and the Writer's underlying stream must be able to handle string writes, while ensuring that the first write succeeds and the subsequent write fails.
