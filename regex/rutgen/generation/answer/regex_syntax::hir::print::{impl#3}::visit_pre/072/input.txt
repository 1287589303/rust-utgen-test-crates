HirKind::* should be either Class(hir::Class::Bytes(ref cls)) or Class(hir::Class::Unicode(ref cls)), ranges() should not be empty, cls.iter() should return a range of characters where start is not equal to end and start + 1 should not equal end, with the write_str calls returning both Ok and Err results in a mixed sequence.
