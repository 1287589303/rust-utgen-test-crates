dfa must have a universal start state, input has a haystack of non-empty bytes, input span must be valid with start < end, state.at must initially be set to 0, and state must be initialized with None for id and valid for all preconditions, testing boundary cases where state.at equals input.end.
