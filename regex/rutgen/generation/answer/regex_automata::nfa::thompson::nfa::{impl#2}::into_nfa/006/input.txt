self.start_pattern contains valid StateID(s) starting indices; self.states contains at least one State::Union with non-empty alternates; stack must pop valid StateID from self.states; seen.insert must succeed; self.states must have a State::Look for each sid popped from stack.
