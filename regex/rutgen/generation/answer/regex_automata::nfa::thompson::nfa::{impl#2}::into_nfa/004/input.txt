self.start_pattern must contain at least one StateID, self.states must have at least one valid State with a StateID that matches State::Capture, sid should be a valid index within self.states, and all operations on stack and seen must not cause out of bounds errors or panics.
