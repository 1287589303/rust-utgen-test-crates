dfa_id must be a valid StateID, trans.start and trans.end must define a valid range with at least one representative in self.classes, next must be a valid NFA StateID, epsilons must be a valid Epsilons value, and there must exist an old transition in self.dfa for each byte derived from representatives where oldtrans.state_id() != DEAD and oldtrans == newtrans.
