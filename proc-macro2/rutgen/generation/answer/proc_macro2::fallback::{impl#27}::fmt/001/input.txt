self.repr must be a valid String (including empty), self.span should be a valid Span (case with and without span locations), and fmt must be a mutable reference to a valid Formatter.
