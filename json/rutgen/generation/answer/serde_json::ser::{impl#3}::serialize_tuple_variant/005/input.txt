self.writer must be a valid object that supports flush and serialization, _name must be a static string, _variant_index must be a non-negative u32, variant must be a non-empty static string, and len must be a non-negative usize
