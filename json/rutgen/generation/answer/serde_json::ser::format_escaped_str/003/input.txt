Test input conditions: writer must be a writable buffer, formatter must implement Formatter interface, value must be a UTF-8 encoded string containing various characters including those that require escaping (e.g., "\"", "\n", "\r") and at least one character that does not require escaping, string length should vary from 0 to at least 256 characters, including boundary cases such as empty string and strings with only escape sequences.
