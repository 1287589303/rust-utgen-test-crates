Valid inputs for `writer`: any type that implements `io::Write`, including writable buffers of size 0 (empty) or larger, and test for both success (returning `Ok(())`) and failure cases (mocked writes that return an `io::Error`).
