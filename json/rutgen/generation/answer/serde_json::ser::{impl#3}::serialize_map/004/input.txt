self must have a valid formatter with begin_object supporting len values of 1 to N (where N is the capacity limit of the object) with len not equal to 0, and the writer must be capable of accepting the formatted object.
