self must be an instance of Compound with a state of either Empty, First, or Rest; the writer W must be a valid io::Write implementation; valid formatter F must be provided; Result must return Ok(()) upon successful serialization and an appropriate Error on failure.
