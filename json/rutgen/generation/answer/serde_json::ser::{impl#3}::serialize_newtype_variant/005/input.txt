self.formatter.writer must be writable, variant must be a valid string without control characters, and value must be a valid serializable type referenced by T, with T capable of being serialized without causing an error.
