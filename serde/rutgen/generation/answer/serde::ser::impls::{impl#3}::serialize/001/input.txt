self must implement a method to_bytes() that returns a &[u8]; S must implement Serializer with methods serialize_bytes that can accept &[u8], considering varying lengths (0 to N, where N is a reasonable upper limit) and different byte patterns (valid and invalid).
