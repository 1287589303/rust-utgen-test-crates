self is a valid FlatMapSerializeStruct instance and M is a SerializeMap implementation.
