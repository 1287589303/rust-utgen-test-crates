f() returns a Result<NonZeroUsize, E> with a NonZeroUsize greater than 0, self.inner starts at 0 before compare_exchange, and old retains a value greater than 0 during the exchange at line 132.
