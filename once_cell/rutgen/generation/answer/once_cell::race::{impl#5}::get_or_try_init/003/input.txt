ptr.is_null() == true, f returns Ok/Some, exchange returns Err(old) with old not null
