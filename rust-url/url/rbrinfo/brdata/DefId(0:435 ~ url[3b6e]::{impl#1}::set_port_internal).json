{
  "name": "url::{impl#1}::set_port_internal",
  "mod_info": {
    "name": "",
    "loc": "url/src/lib.rs:9:1:3218:2"
  },
  "visible": true,
  "loc": "url/src/lib.rs:1887:5:1924:6",
  "doc": "",
  "code": [
    "fn set_port_internal(&mut self, port: Option<u16>) {",
    "    match (self.port, port) {",
    "        (None, None) => {}",
    "        (Some(_), None) => {",
    "            self.serialization",
    "                .drain(self.host_end as usize..self.path_start as usize);",
    "            let offset = self.path_start - self.host_end;",
    "            self.path_start = self.host_end;",
    "            if let Some(ref mut index) = self.query_start {",
    "                *index -= offset",
    "            }",
    "            if let Some(ref mut index) = self.fragment_start {",
    "                *index -= offset",
    "            }",
    "        }",
    "        (Some(old), Some(new)) if old == new => {}",
    "        (_, Some(new)) => {",
    "            let path_and_after = self.slice(self.path_start..).to_owned();",
    "            self.serialization.truncate(self.host_end as usize);",
    "            write!(&mut self.serialization, \":{}\", new).unwrap();",
    "            let old_path_start = self.path_start;",
    "            let new_path_start = to_u32(self.serialization.len()).unwrap();",
    "            self.path_start = new_path_start;",
    "            let adjust = |index: &mut u32| {",
    "                *index -= old_path_start;",
    "                *index += new_path_start;",
    "            };",
    "            if let Some(ref mut index) = self.query_start {",
    "                adjust(index)",
    "            }",
    "            if let Some(ref mut index) = self.fragment_start {",
    "                adjust(index)",
    "            }",
    "            self.serialization.push_str(&path_and_after);",
    "        }",
    "    }",
    "    self.port = port;",
    "}"
  ],
  "size": {
    "chain": 22,
    "contra": 0,
    "min_set": 4
  },
  "cond_chains": [
    {
      "id": 1,
      "conds": [
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        40,
        41,
        45,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 2,
      "conds": [
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        40,
        41,
        42,
        43,
        44,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 3,
      "conds": [
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        37,
        38,
        39,
        41,
        45,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 4,
      "conds": [
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        37,
        38,
        39,
        41,
        42,
        43,
        44,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 5,
      "conds": [
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        4,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        40,
        41,
        45,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 6,
      "conds": [
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        4,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        40,
        41,
        42,
        43,
        44,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 7,
      "conds": [
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        4,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        37,
        38,
        39,
        41,
        45,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 8,
      "conds": [
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        4,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        37,
        38,
        39,
        41,
        42,
        43,
        44,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 9,
      "conds": [
        {
          "cond": "(self.port, port) matches (Some(old), Some(new))",
          "norm": null,
          "value": "true",
          "line": 1888,
          "bound": null
        },
        {
          "cond": "old == new",
          "norm": "new == old",
          "value": "true",
          "line": 1902,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        4,
        6,
        24,
        25,
        50
      ],
      "may_contra": false,
      "min_set": true
    },
    {
      "id": 10,
      "conds": [
        {
          "cond": "(self.port, port) matches (Some(old), Some(new))",
          "norm": null,
          "value": "true",
          "line": 1888,
          "bound": null
        },
        {
          "cond": "old == new",
          "norm": "new == old",
          "value": "false",
          "line": 1902,
          "bound": null
        },
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        4,
        6,
        24,
        26,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        40,
        41,
        45,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 11,
      "conds": [
        {
          "cond": "(self.port, port) matches (Some(old), Some(new))",
          "norm": null,
          "value": "true",
          "line": 1888,
          "bound": null
        },
        {
          "cond": "old == new",
          "norm": "new == old",
          "value": "false",
          "line": 1902,
          "bound": null
        },
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        4,
        6,
        24,
        26,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        40,
        41,
        42,
        43,
        44,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 12,
      "conds": [
        {
          "cond": "(self.port, port) matches (Some(old), Some(new))",
          "norm": null,
          "value": "true",
          "line": 1888,
          "bound": null
        },
        {
          "cond": "old == new",
          "norm": "new == old",
          "value": "false",
          "line": 1902,
          "bound": null
        },
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        4,
        6,
        24,
        26,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        37,
        38,
        39,
        41,
        45,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 13,
      "conds": [
        {
          "cond": "(self.port, port) matches (Some(old), Some(new))",
          "norm": null,
          "value": "true",
          "line": 1888,
          "bound": null
        },
        {
          "cond": "old == new",
          "norm": "new == old",
          "value": "false",
          "line": 1902,
          "bound": null
        },
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        4,
        6,
        24,
        26,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        37,
        38,
        39,
        41,
        42,
        43,
        44,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": true
    },
    {
      "id": 14,
      "conds": [
        {
          "cond": "(self.port, port) matches (Some(_), None)",
          "norm": null,
          "value": "true",
          "line": 1888,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1895,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1898,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        4,
        5,
        10,
        11,
        12,
        13,
        17,
        18,
        22,
        23,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 15,
      "conds": [
        {
          "cond": "(self.port, port) matches (Some(_), None)",
          "norm": null,
          "value": "true",
          "line": 1888,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1895,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1898,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        4,
        5,
        10,
        11,
        12,
        13,
        17,
        18,
        19,
        20,
        21,
        23,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 16,
      "conds": [
        {
          "cond": "(self.port, port) matches (Some(_), None)",
          "norm": null,
          "value": "true",
          "line": 1888,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1895,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1898,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        4,
        5,
        10,
        11,
        12,
        13,
        14,
        15,
        16,
        18,
        22,
        23,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 17,
      "conds": [
        {
          "cond": "(self.port, port) matches (Some(_), None)",
          "norm": null,
          "value": "true",
          "line": 1888,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1895,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1898,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        4,
        5,
        10,
        11,
        12,
        13,
        14,
        15,
        16,
        18,
        19,
        20,
        21,
        23,
        50
      ],
      "may_contra": false,
      "min_set": true
    },
    {
      "id": 18,
      "conds": [
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        2,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        40,
        41,
        45,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 19,
      "conds": [
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        2,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        40,
        41,
        42,
        43,
        44,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 20,
      "conds": [
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        2,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        37,
        38,
        39,
        41,
        45,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 21,
      "conds": [
        {
          "cond": "(self.port, port) matches (_, Some(new))",
          "norm": null,
          "value": "true",
          "line": 1903,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.query_start",
          "norm": null,
          "value": "true",
          "line": 1914,
          "bound": null
        },
        {
          "cond": "let Some(ref mut index) = self.fragment_start",
          "norm": null,
          "value": "true",
          "line": 1917,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        2,
        1,
        8,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        37,
        38,
        39,
        41,
        42,
        43,
        44,
        46,
        47,
        48,
        49,
        50
      ],
      "may_contra": false,
      "min_set": false
    },
    {
      "id": 22,
      "conds": [
        {
          "cond": "(self.port, port) matches (None, None)",
          "norm": null,
          "value": "true",
          "line": 1888,
          "bound": null
        }
      ],
      "ret": null,
      "path": [
        0,
        2,
        3,
        9,
        50
      ],
      "may_contra": false,
      "min_set": true
    }
  ]
}