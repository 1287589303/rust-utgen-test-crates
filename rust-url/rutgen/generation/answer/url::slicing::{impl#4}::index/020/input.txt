self.port must be None, self.host_end must be a non-negative integer, position must be Position::BeforePort
