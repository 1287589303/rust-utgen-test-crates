self.cannot_be_a_base() is false, self.scheme() == url.scheme(), self.host() == url.host(), self.port() == url.port(), base_path.peek().is_some() is false, base_path_segment is non-empty, relative is initially empty, url_path_segment is non-empty, url_filename is non-empty, url.query() is Some, url.fragment() is Some
