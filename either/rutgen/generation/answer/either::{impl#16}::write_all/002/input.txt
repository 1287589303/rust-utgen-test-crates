self must be an instance of Either with either Left or Right containing a type that implements Write, and buf must be a slice of bytes with a length of 0 to 1024.
