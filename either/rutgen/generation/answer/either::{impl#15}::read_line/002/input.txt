self should be an instance of Either with either a BufRead type L or R, and buf should be a mutable reference to a non-empty String; both cases should be tested: L and R as BufRead types with at least one line of input and edge cases such as empty buf or EOF condition.
