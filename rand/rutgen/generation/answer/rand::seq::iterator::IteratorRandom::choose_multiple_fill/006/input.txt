len == amount and an iterator with at least amount elements and a buf of length amount where k is valid for all indices in buf and the iterator is not exhausted during enumeration
