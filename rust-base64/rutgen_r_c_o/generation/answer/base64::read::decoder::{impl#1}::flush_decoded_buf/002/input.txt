self.decoded_len in the range (1, 2) and buf length >= self.decoded_len, with buf not being empty
