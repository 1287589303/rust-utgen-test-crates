self.delegate is initialized with a valid writer, and self.extra_input_occupied_len is in the range [0, MIN_ENCODE_CHUNK_SIZE] during finish() call.
