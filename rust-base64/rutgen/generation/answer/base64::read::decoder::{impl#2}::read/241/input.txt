buf: non-empty array of size greater than or equal to 3; self.b64_offset: values within the range [0, BUF_SIZE] (inclusive)
