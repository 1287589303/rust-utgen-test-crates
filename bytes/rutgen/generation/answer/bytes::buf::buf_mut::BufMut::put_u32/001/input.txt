remaining capacity must be at least 4 bytes, n must be a valid u32 (0 to 2^32-1)
