limit should be tested with values of size 0, 1, 2, and maximum buffer size, including scenarios where the buffer size is smaller than, equal to, and greater than the limit.
