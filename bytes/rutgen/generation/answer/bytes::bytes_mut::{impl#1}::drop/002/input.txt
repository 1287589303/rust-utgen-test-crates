self.data must point to a valid Shared struct with a positive ref_count and cap greater than 0
