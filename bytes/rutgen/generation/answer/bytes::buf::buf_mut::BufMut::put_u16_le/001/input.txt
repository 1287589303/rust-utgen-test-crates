self.remaining_mut() should be >= 2; n should be in the range 0..=65535 (valid u16 range).
