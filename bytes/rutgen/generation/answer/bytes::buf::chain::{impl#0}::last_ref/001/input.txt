T can be any type implementing Buf, U can be any type implementing Buf, including an empty buffer or a large buffer, and the Chain should be constructed with instances of T and U to validate the last_ref return type.
