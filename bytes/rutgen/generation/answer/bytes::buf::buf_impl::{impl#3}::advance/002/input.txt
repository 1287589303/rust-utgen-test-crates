cnt is in the range [0, max_cnt] where max_cnt = len - position, and len is the length of the buffer referenced by self.
